BootStrap: yum
OSVersion: 7
MirrorURL: http://mirror.centos.org/centos-%{OSVERSION}/%{OSVERSION}/os/$basearch/
Include: yum
%setup

%files

%environment
# use bash as default shell
SHELL=/bin/bash
export SHELL

%setup

%files


%runscript
exec /bin/R "$@"

%post
    # commands to be executed inside container during bootstrap
    # add python and install some packages
    yum -y groups install "Development Tools"
    yum -y groups install "GNOME Desktop"
    yum -y groups install "Base"
    yum -y groups install "X Window System" "Desktop" "Fonts"
    yum -y install qt
    yum -y install mesa-libGLU
    yum -y install SDL SDL-devel
    yum install -y epel-release
    yum install -y libxml2-devel
    yum install -y openssl-devel

    yum -y update
    yum -y install gcc
    yum -y install gcc-c++
    yum -y install libcurl-devel
    yum install -y libjpeg-devel
    yum -y install qtwebkit
    yum -y install qt5-qtbase-devel
    yum -y install gmp-devel
    yum -y install mpfr-devel
    yum -y install mpfr-devel
    yum -y install udunits2-devel 
    yum -y install https://www.rpmfind.net/linux/fedora/linux/updates/29/Everything/x86_64/Packages/g/gdal-2.3.2-1.fc29.x86_64.rpm 
    yum -y install https://rpmfind.net/linux/fedora/linux/releases/28/Everything/x86_64/os/Packages/g/gdal-devel-2.2.4-2.fc28.x86_64.rpm 
    yum -y install proj-devel geos-devel
    yum -y install R

    mkdir -p /storage/home
    mkdir -p /storage/work
    mkdir -p /gpfs/scratch
    mkdir -p /gpfs/group
    mkdir -p /var/spool/torque
